<div class="container">
  <% if current_user %>
    <div class="custom-row d-flex">
      <% if current_user.role == 'student' || current_user.role == 'professor' %>
        <div class="profile-section">
          <%= render 'layouts/profile_box', user: current_user %>
        </div>
        <div class="cards-section">
          <% if current_user.registro_matricula %> 
            <% current_user.registro_matricula.each do |matricula| %>
              <% matricula.turma.questionarios.each do |questionario| %>
                <% if questionario.template.publico_alvo == current_user.role && !questionario.respostas.exists?(user: current_user) %>
                  <%= render 'layouts/card_box', 
                      title: questionario.nome, 
                      content: questionario.template.semestre, 
                      professor: questionario.user.nome,
                      materia: questionario.turma.materium.nome,
                      questionario: questionario %>
                <% elsif questionario.template.publico_alvo == current_user.role %>
                  <div class="card-disabled">
                    <%= render 'layouts/card_box', 
                        title: questionario.nome, 
                        content: questionario.template.semestre, 
                        professor: questionario.user.nome,
                        materia: questionario.turma.materium.nome,
                        questionario: nil %>
                    <div class="already-answered">Você já respondeu este questionário</div>
                  </div>
                <% end %>
              <% end %>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <div class="profile-section">
          <%= render 'layouts/profile_box', user: current_user %>
        </div>
        <div class="cards-section">
          <% current_user.questionarios.each do |questionario| %>
            <%= render 'layouts/card_box', 
                title: questionario.nome, 
                content: questionario.template.semestre, 
                professor: questionario.user.nome,
                materia: questionario.turma.materium.nome,
                questionario: questionario %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>